spring:
  application:
    name: douniu-backend
  
  # 数据源配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/douniu?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Shanghai
    username: root
    password: 123456
  
  # Redis配置
  data:
    redis:
      host: 127.0.0.1
      port: 6379
      password: 123456
      database: 0
      timeout: 3000ms
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0

# MyBatis Plus配置
mybatis-plus:
  mapper-locations: classpath*:/mapper/**/*.xml
  type-aliases-package: com.douniu.entity
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      id-type: auto

# Sa-Token配置
sa-token:
  token-name: token
  timeout: 2592000  # token有效期：30天（秒）
  active-timeout: -1  # token活跃超时：-1表示不限制
  is-concurrent: true  # 是否允许同一账号并发登录
  is-share: true  # 是否在多个服务间共享token
  token-style: uuid  # token风格：uuid
  is-log: false  # 是否打印日志
  # 注意：当引入了 sa-token-redis-jackson 依赖后，Sa-Token 会自动使用 Redis 存储 token
  # 确保 Redis 配置正确，token 就会持久化到 Redis，重启服务后不会失效

# 服务器配置
server:
  port: 8080
  servlet:
    context-path: /api

# 日志配置
logging:
  level:
    com.douniu: debug
    org.springframework.web: info

